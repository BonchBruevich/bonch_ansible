---
  - hosts: a44306.dcti.sut.ru
        
    remote_user: root
    tasks:
    
    - name: Add printer support
      action: apt pkg=p910nd state=present

    - name: Enable p910nd
      lineinfile: dest=/etc/default/p910nd regexp="^P910ND_START=" line="P910ND_START=1"

    - name: Set printer for p910nd
      lineinfile: dest=/etc/default/p910nd regexp="^P910ND_OPTS=" line="P910ND_OPTS=\"-f /dev/usb/lp0 -b\""

    - name: Service p910nd restart
      service: name=p910nd state=restarted

    - name: Enable proper scanner firmware
      lineinfile: dest=/etc/sane.d/snapscan.conf regexp="^firmware" line="firmware /lib/firmware/u176v046.bin"

    - name: Copy firmware file
      copy: dest=/lib/firmware/u176v046.bin src=./files/common/lib/firmware/u176v046.bin
